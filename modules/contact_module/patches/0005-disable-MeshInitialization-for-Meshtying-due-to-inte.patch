From ef89575100d5a416a2bebea6153abac0c902b18b Mon Sep 17 00:00:00 2001
From: Tobias Wiesner <wiesner@lnm.mw.tum.de>
Date: Wed, 26 Nov 2014 10:20:47 +0100
Subject: [PATCH 05/16] disable MeshInitialization for Meshtying due to
 internal linear solvers. To be discussed!

---
 src/drt_contact/meshtying_lagrange_strategy.cpp |   14 ++++++++------
 src/drt_contact/meshtying_penalty_strategy.cpp  |    7 ++++---
 2 files changed, 12 insertions(+), 9 deletions(-)

diff --git a/src/drt_contact/meshtying_lagrange_strategy.cpp b/src/drt_contact/meshtying_lagrange_strategy.cpp
index a92b50c..8d04c59 100644
--- a/src/drt_contact/meshtying_lagrange_strategy.cpp
+++ b/src/drt_contact/meshtying_lagrange_strategy.cpp
@@ -20,9 +20,9 @@ Maintainer: Alexander Popp
 #include "../drt_mortar/mortar_utils.H"
 #include "../drt_inpar/inpar_mortar.H"
 #include "../drt_inpar/inpar_contact.H"
-#include "../drt_lib/drt_globalproblem.H"
+//#include "../drt_lib/drt_globalproblem.H"
 #include "../linalg/linalg_multiply.H"
-#include "../linalg/linalg_solver.H"  // mesh initialization :-(
+//#include "../linalg/linalg_solver.H"  // mesh initialization :-(
 #include "../linalg/linalg_utils.H"
 
 /*----------------------------------------------------------------------*
@@ -286,8 +286,9 @@ Teuchos::RCP<Epetra_Vector> CONTACT::MtLagrangeStrategy::MeshInitialization()
     mmatrix_->Multiply(false,*xm,*rhs);
 
     // solve with default solver
-    LINALG::Solver solver(Comm());
-    solver.Solve(lhs->EpetraOperator(),Xslavemod,rhs,true);
+    //LINALG::Solver solver(Comm());
+    //solver.Solve(lhs->EpetraOperator(),Xslavemod,rhs,true);
+    dserror("Linear solvers not included in contact module. Please contact AdCo Engineering GW GmbH for more details");
 #else
     // this is trivial for dual Lagrange multipliers
     mhatmatrix_->Multiply(false, *Xmaster, *Xslavemod);
@@ -312,8 +313,9 @@ Teuchos::RCP<Epetra_Vector> CONTACT::MtLagrangeStrategy::MeshInitialization()
       mmatrix_->Multiply(false, *Xmaster, *rhs);
 
       // solve with default solver
-      LINALG::Solver solver(Comm());
-      solver.Solve(dmatrix_->EpetraOperator(), Xslavemod, rhs, true);
+      //LINALG::Solver solver(Comm());
+      //solver.Solve(dmatrix_->EpetraOperator(), Xslavemod, rhs, true);
+      dserror("Linear solvers not included in contact module. Please contact AdCo Engineering GW GmbH for more details");
     }
   }
 
diff --git a/src/drt_contact/meshtying_penalty_strategy.cpp b/src/drt_contact/meshtying_penalty_strategy.cpp
index e8479cf..34936ed 100644
--- a/src/drt_contact/meshtying_penalty_strategy.cpp
+++ b/src/drt_contact/meshtying_penalty_strategy.cpp
@@ -19,7 +19,7 @@ Maintainer: Alexander Popp
 #include "../drt_mortar/mortar_utils.H"
 #include "../drt_inpar/inpar_contact.H"
 #include "../linalg/linalg_multiply.H"
-#include "../linalg/linalg_solver.H"  // mesh initialization :-(
+//#include "../linalg/linalg_solver.H"  // mesh initialization :-(
 #include "../linalg/linalg_utils.H"
 
 
@@ -141,8 +141,9 @@ Teuchos::RCP<Epetra_Vector> CONTACT::MtPenaltyStrategy::MeshInitialization()
   mmatrix_->Multiply(false,*Xmaster,*rhs);
 
   // solve with default solver
-  LINALG::Solver solver(Comm());
-  solver.Solve(dmatrix_->EpetraOperator(),Xslavemod,rhs,true);
+  //LINALG::Solver solver(Comm());
+  //solver.Solve(dmatrix_->EpetraOperator(),Xslavemod,rhs,true);
+  dserror("Linear solvers not included in contact module. Please contact AdCo Engineering GW GmbH for more details");
 
   //**********************************************************************
   // (3) perform mesh initialization node by node
-- 
1.7.7.6

