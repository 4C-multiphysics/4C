From 36a6d0ca8a8b5dec857f4e4aa0e8796a0002a62f Mon Sep 17 00:00:00 2001
From: Tobias Wiesner <wiesner@lnm.mw.tum.de>
Date: Tue, 25 Nov 2014 10:28:46 +0100
Subject: [PATCH 03/16] contact_integrator.cpp: bypass porosity calculation

---
 src/drt_contact/contact_integrator.cpp |   36 +------------------------------
 1 files changed, 2 insertions(+), 34 deletions(-)

diff --git a/src/drt_contact/contact_integrator.cpp b/src/drt_contact/contact_integrator.cpp
index 8b3089c..940b516 100644
--- a/src/drt_contact/contact_integrator.cpp
+++ b/src/drt_contact/contact_integrator.cpp
@@ -28,9 +28,6 @@ Maintainer: Alexander Popp
 #include "../drt_fem_general/drt_utils_integration.H"
 #include "../drt_inpar/inpar_contact.H"
 #include "../drt_inpar/inpar_wear.H"
-
-//headers for poro contact integration
-#include "../drt_mat/structporo.H"
 #include "../drt_fem_general/drt_utils_boundary_integration.H"
 
 /*----------------------------------------------------------------------*
@@ -10395,6 +10392,8 @@ void inline CONTACT::CoIntegrator::GP_3D_NCOUP_DERIV(
      bool quadratic,
      int nintrow)
 {
+  double porosity = 0.0;
+  
   // map iterator
   typedef GEN::pairedvector<int,double>::const_iterator _CI;
 
@@ -10449,37 +10448,6 @@ void inline CONTACT::CoIntegrator::GP_3D_NCOUP_DERIV(
   for (int i=0;i<3;++i)
     gpn[i]/=lengthn[0];
 
-  ////////////////////////////////!!!Calculate Porosity!!!////////////////////////////
-  // get J
-  const double J = DetDeformationGradient3D(sele,wgt,gpcoord);
-
-  // get fluid pressure in GP
-  double sgpfpres = 0.0;
-  for (int i=0;i<nrow;++i)
-  {
-    CoNode* mymrtrnode = dynamic_cast<CoNode*> (snodes[i]);
-    sgpfpres += sval[i] * (*mymrtrnode->CoPoroData().fpres());
-  }
-
-  double porosity;
-  Teuchos::ParameterList params; //empty parameter list;
-    Teuchos::RCP< MAT::StructPoro > structmat =
-        Teuchos::rcp_dynamic_cast<MAT::StructPoro>(sele.ParentElement()->Material(0));
-    structmat->ComputeSurfPorosity(params,
-                                   sgpfpres,
-                                   J,
-                                   sele.FaceParentNumber(),
-                                   1, //finally check what to do here Todo:
-                                   porosity,
-                                   NULL,
-                                   NULL,
-                                   NULL,                  //dphi_dJdp not needed
-                                   NULL,                  //dphi_dJJ not needed
-                                   NULL,                   //dphi_dpp not needed
-                                   false
-                                   );
-    ////////////////////////////////!!!Calculate Porosity done!!!////////////////////////////
-
   // build normal coupling term at current GP
   for (int i=0;i<Dim();++i)
   {
-- 
1.7.7.6

