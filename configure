#!/bin/sh
#
# CCARAT Configuration
#
# Create a Makefile with dependency information for a user supplied configuration file.
#

# some usability tests
if [ "x$1" = "x" -o "x$2" = "x" ]; then
  echo usage: $0 config-file-name defines-file-name
  exit 1
fi

if [ ! -s "$1" ]; then
  echo $0: file not found: $1
  exit 1
fi

if [ ! -r "$1" ]; then
  echo $0: file not readable: $1
  exit 1
fi

if [ ! -s "$2" ]; then
  echo $0: file not found: $2
  exit 1
fi

if [ ! -r "$2" ]; then
  echo $0: file not readable: $2
  exit 1
fi

makefile="Makefile"
configfile="$1"
definefile="$2"
extraargs="$3"

SRC=`dirname $0`
DEST=.

. $SRC/scripts/setup-variables.sh
. $SRC/scripts/setup-libraries.sh
. $SRC/scripts/setup-objects.sh
. $SRC/scripts/build-define-header.sh
. $SRC/scripts/build-makefile.sh
